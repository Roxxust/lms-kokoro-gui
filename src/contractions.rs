use super::*;
use crate::tts::word2ipa_with_context;
use crate::tts::g2p;

pub fn word2ipa(word: &str) -> String {
    pub static CONTRACTIONS: Lazy<HashMap<&'static str, &'static str>> = Lazy::new(|| {
        use std::collections::HashMap;
        let entries = [
    // ─── Contractions ───
    //ai converted.
    ("they're", "/ðeɪr/"), ("who're", "/hʊr/"), ("what're", "/wʌtr/"),
    ("where're", "/wɛr/"), ("when're", "/wɛnr/"), ("why're", "/waɪr/"),
    ("i've", "/aɪv/"), ("we've", "/wiv/"), ("they've", "/ðev/"),
    ("who've", "/hʊv/"), ("what've", "/wʌtv/"), ("where've", "/wɛrv/"),
    ("when've", "/wɛnv/"), ("why've", "/waɪv/"), ("how've", "/haʊv/"),
    ("i'll", "/aɪl/"), ("we'll", "/wil/"), ("they'll", "/ðeɪl/"),
    ("he'll", "/hel/"), ("she'll", "/ʃel/"), ("it'll", "/ɪtl/"), ("who'll", "/hul/"),
    ("what'll", "/wʌtl/"), ("where'll", "/wɛrl/"), ("when'll", "/wɛnl/"),
    ("why'll", "/waɪl/"), ("how'll", "/haʊl/"), ("i'ma", "/ˈaɪəmə/"),
    ("i'd", "/aɪd/"), ("you'd", "/juːd/"), ("we'd", "/wɪd/"), ("they'd", "/ðed/"),
    ("he'd", "/hed/"), ("she'd", "/ʃed/"), ("it'd", "/ɪtd/"),
    ("who'd", "/hud/"), ("what'd", "/wʌtd/"), ("where'd", "/wɛrd/"),
    ("when'd", "/wɛnd/"), ("why'd", "/waɪd/"), ("how'd", "/haʊd/"),
    ("i'd've", "/ˈaɪdəv/"), ("you'd've", "/ˈjudəv/"),
    ("we'd've", "/ˈwɪdəv/"), ("they'd've", "/ˈðedəv/"),
    ("he'd've", "/ˈhedəv/"), ("she'd've", "/ˈʃedəv/"),
    ("it'd've", "/ˈɪtdəv/"), ("how're", "/haʊr/"),
    ("he's", "/hiːz/"), ("she's", "/ʃiz/"), ("it's", "/ɪts/"), ("here's", "/hɪrz/"),
    ("there's", "/ðɛrz/"), ("that's", "/ðæts/"), ("this's", "/ðɪs ɪz/"),
    ("when's", "/wɛnz/"), ("why's", "/waɪz/"), ("how's", "/haʊz/"), ("where's", "/wɛrz/"),
    ("you're", "yo.ʊr"),
    //you're   you've   you'll
    //proper
    ("i'm", "/aɪm/"), ("we're", "/wɚ/"), 
    ("what's","/wɑːts/"), ("who's","/huːz/"),
    ("isn't","/ɪsnət/"), ("aren't","/ɑːrnt/"), ("wasn't","/ˈwɑː.zənt/"), ("weren't","/wɝːnt/"),
    ("haven't","/havənt/"), ("hasn't","/ˈhæz.ənt/"), ("hadn't","hádənt"),
    ("won't","/woʊnt/"), ("couldn't","/ˈkʊd.ənt/"),
    ("mightn't","/ˈmaɪ.tənt/"), ("mustn't","/ˈmʌs.ənt/"),
    ("shan't","shant"), ("needn't","/ˈniː.dənt/"), ("daren't","darent"),
    ("let's","/lets/"), ("o'clock","/əˈklɒk/"), ("'em","em"),
    ("don't","/doʊnt/"), ("won't've", "/wəʊnt əv/"),
    ("woudn't","/wʊldn̩t/"), ("shouldn't","ʃʊdn̩t/"),
    ("you've", "yewːve/"),  ("you'll", "/yewːll/"),
    // ─── Pronunciation Helpers ───
    ("read","riːd"), ("tear","tɪə"), ("AI","A.I"),
    ("lives","/laɪvz/"), ("every","/ˈevri"), ("liberating","/ˈlɪb.ə.reɪ.t̬ɪŋ/"),
    ("for","/fɔːr/"), ("further","/ˈfɝː.ðɚ/"), ("forever","/fɔːˈrev.ɚ/"),
    ("was","/wəz/"), ("been","/bɪn/"), ("clothes","/kloʊðz/"),
    ("often","/ˈɔf(ə)n/"), ("either","/ˈiːðər/"), ("neither","/ˈniːðər/"),
    ("route","/ruːt/"), ("suite","swiːt"), ("aisle","aɪl"),
    ("bass","/beɪs/"), ("bow","/baʊ/"), ("buff","/bʌf/"),
    ("cache","/kæʃ/"), ("caught","/kɔːt/"), ("chaos","/ˈkeɪ.ɑs/"),
    ("chaise","ʃeɪz"), ("colonel","/ˈkɜrnəl/"), ("comfortable","/ˈkʌmftəbəl/"),
    ("cupboard","/ˈkʌbərd/"), ("debt","/det/"), ("design","dɪˈzaɪn"),
    ("diabetes","/ˌdaɪəˈbiːtiːz/"), ("doubt","/daʊt/"), ("ensemble","ɑnˈsɑmbəl"),
    ("eye","aɪ"), ("fuchsia","/ˈfjuːʃə/"), ("genre","ʒɑnrə"),
    ("gourmet","ɡʊrˈmeɪ"), ("hierarchy","/ˈhaɪərɑrki/"), ("hour","aʊər"),
    ("hyperbole","haɪˈpɜrbəli"), ("indict","ɪnˈdaɪt"), ("iron","aɪərn"),
    ("jaguar","/ˈdʒæɡjuːɑr/"), ("knight","naɪt"), ("know","noʊ"),
    ("leisure","/ˈliːʒər/"), ("liaison","/ˈliːəzɑn/"), ("light","laɪt"),
    ("lose","luːz"), ("margarine","/ˌmɑrdʒəˈriːn/"), ("mischievous","/ˈmɪtʃəvəs/"),
    ("naive","naɪˈiːv"), ("naked","/ˈneɪkɪd/"), ("niche","niːʃ"),
    ("obese","oʊˈbiːs"), ("once","wʌns"), ("one","wʌn"),
    ("phlegm","/flem/"), ("pint","paɪnt"), ("queue","kjuː"),
    ("raspberry","/ˈræzˌbɛri/"), ("rarely","/ˈrɛrli/"), ("receipt","rɪˈsiːt"),
    ("schedule","/ˈskɛdʒuːl/"), ("scissors","/ˈsɪzərz/"), ("segue","/ˈseɡweɪ/"),
    ("sergeant","/ˈsɑrdʒənt/"), ("sherbet","/ˈʃɜrbət/"), ("sign","saɪn"),
    ("subtle","/ˈsʌtəl/"), ("suite","swiːt"), ("sword","sɔrd"),
    ("thyme","taɪm"), ("tongue","tʌŋ"), ("toward","tɔrd"),
    ("trouser","/ˈtraʊzər/"), ("vehicle","/ˈviːɪkəl/"), ("whole","/hoʊl/"),
    ("world","/wɝːld/"), ("worse","wɜrs"), ("yolk","joʊk"),
    ("elongating","/ɪˈlɑːŋ.ɡeɪt/"), ("bloodlust","/ˈblʌd ˌlʌst/"),
    ("teenager","/ˈtiːnˌeɪ.dʒɚ/"), ("towering","/ˈtaʊ.ɚ.ɪŋ/"),
    ("labyrinth","/ˈlæb.ə.rɪnθ/"), ("labyrinthine","/ˌlæb.əˈrɪnˌθaɪn/."),
    ("history","/ˈhɪs.t̬ɚ.i/"), ("lover","/ˈlʌv.ɚ/"),
    ("discoveries","/dɪˈskʌv.ə.riz/"), ("read","/riːd/"),
    ("concert","/ˈkɑːn.sɚt/"), ("rephrasing","/riˈfreɪzɪŋ/"),
        ];
        HashMap::from(entries)
    });
    let lower_word = word.to_lowercase();
    if let Some(&expanded_phrase) = CONTRACTIONS.get(lower_word.as_str()) {
        let ipa_like_chars: Vec<char> = vec!['ː', 'ə', 'ɪ', 'ʊ', 'ɛ', 'æ', 'ɑ', 'ɔ', 'ʌ', 'i', 'u', 'e', 'o', 'a',
         ' ', 'ˈ', 'ˌ', 'ʃ', 'ʒ', 'θ', 'ð', 'ʧ', 'ʤ', 'ŋ', 'ɹ', 'ɚ', 'ɝ', 'j', 'w', 'ɥ', 'ʍ', 'ʙ', 'ʜ', 'ʢ', 'ʡ', 'n', 't', 'd', 'l', 'r', 'z', 's', 'f', 'v', 'h', 'm', 'p', 'b', 'ɡ', 'k', 'ʔ', 'ʍ', 'ɥ', 'ʘ', 'ǀ', 'ǃ', 'ǂ', 'ǁ', 'ɓ', 'ɗ', 'ʄ', 'ɠ', 'ʛ', 'ɕ', 'ʑ', 'ɧ', 'ɫ', 'ɬ', 'ɮ', 'ɯ', 'ɘ', 'ɚ', 'ɵ', 'ɶ', 'ɒ', 'ɨ', 'ʉ', 'ɘ', 'ə', 'ɛ', 'ɜ', 'ɞ', 'ɐ', 'ɶ', 'ɑ', 'ɒ', 'ᵻ', 'ᵿ', 'ɫ', 'ᵊ', 'ᵸ', 'ᶿ', 'ᶑ', 'ᵝ', 'ᵞ', 'ᶡ', 'ᶣ', 'ᶅ', 'ᶆ', 'ᶇ', 'ᶈ', 'ᶉ', 'ᶊ', 'ᶋ', 'ᶌ', 'ᶍ', 'ᶎ', 'ḁ', 'ḃ', 'ḅ', 'ḇ', 'ḉ', 'ḋ', 'ḍ', 'ḏ', 'ḑ', 'ḓ', 'ḕ', 'ḗ', 'ḙ', 'ḛ', 'ḝ', 'ḟ', 'ḡ', 'ḣ', 'ḥ', 'ḧ', 'ḩ', 'ḫ', 'ḭ', 'ḯ', 'ḱ', 'ḳ', 'ḵ', 'ḷ', 'ḹ', 'ḻ', 'ḽ', 'ḿ', 'ṁ', 'ṃ', 'ṅ', 'ṇ', 'ṉ', 'ṋ', 'ṍ', 'ṏ', 'ṑ', 'ṓ', 'ṕ', 'ṗ', 'ṙ', 'ṛ', 'ṝ', 'ṟ', 'ṡ', 'ṣ', 'ṥ', 'ṧ', 'ṩ', 'ṫ', 'ṭ', 'ṯ', 'ṱ', 'ṳ', 'ṵ', 'ṷ', 'ṹ', 'ṻ', 'ṽ', 'ṿ', 'ẁ', 'ẃ', 'ẅ', 'ẇ', 'ẉ', 'ẋ', 'ẍ', 'ẏ', 'ẑ', 'ẓ', 'ẕ', 'ẛ', 'ạ', 'ả', 'ấ', 'ầ', 'ẩ', 'ẫ', 'ậ', 'ắ', 'ằ', 'ẳ', 'ẵ', 'ặ', 'ẹ', 'ẻ', 'ẽ', 'ế', 'ề', 'ể', 'ễ', 'ệ', 'ỉ', 'ị', 'ọ', 'ỏ', 'ố', 'ồ', 'ổ', 'ỗ', 'ộ', 'ớ', 'ờ', 'ở', 'ỡ', 'ợ', 'ụ', 'ủ', 'ứ', 'ừ', 'ử', 'ữ', 'ự', 'ỳ', 'ỵ', 'ỷ', 'ỹ', 'ἀ', 'ἁ', 'ἂ', 'ἃ', 'ἄ', 'ἅ', 'ἆ', 'ἇ', 'Ἀ', 'Ἁ', 'Ἂ', 'Ἃ', 'Ἄ', 'Ἅ', 'Ἆ', 'Ἇ', 'ἐ', 'ἑ', 'ἒ', 'ἓ', 'ἔ', 'ἕ', 'Ἐ', 'Ἑ', 'Ἒ', 'Ἓ', 'Ἔ', 'Ἕ', 'ἠ', 'ἡ', 'ἢ', 'ἣ', 'ἤ', 'ἥ', 'ἦ', 'ἧ', 'Ἠ', 'Ἡ', 'Ἢ', 'Ἣ', 'Ἤ', 'Ἥ', 'Ἦ', 'Ἧ', 'ἰ', 'ἱ', 'ἲ', 'ἳ', 'ἴ', 'ἵ', 'ἶ', 'ἷ', 'Ἰ', 'Ἱ', 'Ἲ', 'Ἳ', 'Ἴ', 'Ἵ', 'Ἶ', 'Ἷ', 'ὀ', 'ὁ', 'ὂ', 'ὃ', 'ὄ', 'ὅ', 'Ὀ', 'Ὁ', 'Ὂ', 'Ὃ', 'Ὄ', 'Ὅ', 'ὐ', 'ὑ', 'ὒ', 'ὓ', 'ὔ', 'ὕ', 'ὖ', 'ὗ', 'Ὑ', 'Ὓ', 'Ὕ', 'Ὗ', 'ὠ', 'ὡ', 'ὢ', 'ὣ', 'ὤ', 'ὥ', 'ὦ', 'ὧ', 'Ὠ', 'Ὡ', 'Ὢ', 'Ὣ', 'Ὤ', 'Ὥ', 'Ὦ', 'Ὧ', 'ὰ', 'ά', 'ὲ', 'έ', 'ὴ', 'ή', 'ὶ', 'ί', 'ὸ', 'ό', 'ὺ', 'ύ', 'ὼ', 'ώ', 'ᾀ', 'ᾁ', 'ᾂ', 'ᾃ', 'ᾄ', 'ᾅ', 'ᾆ', 'ᾇ', 'ᾈ', 'ᾉ', 'ᾊ', 'ᾋ', 'ᾌ', 'ᾍ', 'ᾎ', 'ᾏ', 'ᾐ', 'ᾑ', 'ᾒ', 'ᾓ', 'ᾔ', 'ᾕ', 'ᾖ', 'ᾗ', 'ᾘ', 'ᾙ', 'ᾚ', 'ᾛ', 'ᾜ', 'ᾝ', 'ᾞ', 'ᾟ', 'ᾠ', 'ᾡ', 'ᾢ', 'ᾣ', 'ᾤ', 'ᾥ', 'ᾦ', 'ᾧ', 'ᾨ', 'ᾩ', 'ᾪ', 'ᾫ', 'ᾬ', 'ᾭ', 'ᾮ', 'ᾯ', 'ᾰ', 'ᾱ', 'ᾲ', 'ᾳ', 'ᾴ', 'ᾶ', 'ᾷ', 'Ᾰ', 'Ᾱ', 'Ὰ', 'Ά', 'ᾼ', '᾽', 'ι', '᾿', '῀', '῁', 'ῂ', 'ῃ', 'ῄ', 'ῆ', 'ῇ', 'Ὲ', 'Έ', 'Ὴ', 'Ή', 'ῌ', '῍', '῎', '῏', 'ῐ', 'ῑ', 'ῒ', 'ΐ', 'ῖ', 'ῗ', 'Ῐ', 'Ῑ', 'Ὶ', 'Ί', '῝', '῞', '῟', 'ῠ', 'ῡ', 'ῢ', 'ΰ', 'ῤ', 'ῥ', 'ῦ', 'ῧ', 'Ῠ', 'Ῡ', 'Ὺ', 'Ύ', 'Ῥ', '῭', '΅', '`', 'ῲ', 'ῳ', 'ῴ', 'ῶ', 'ῷ', 'Ὸ', 'Ό', 'Ὼ', 'Ώ', 'ῼ', '´', '῾', '‑', '–', '—', '―', '‖', '‘', '’', '‚', '‛', '“', '”', '„', '‟', '†', '‡', '•', '‥', '…', '‰', '′', '″', '‴', '‵', '‶', '‷', '‸', '‹', '›', '※', '‼', '‽', '⁇', '⁈', '⁉', '⁀', '⁁', '⁂', '⁃', '⁄', '⁅', '⁆', '⁇', '⁈', '⁉', '⁗', ' ', '⁰', 'ⁱ', '⁴', '⁵', '⁶', '⁷', '⁸', '⁹', '⁺', '⁻', '⁼', '⁽', '⁾', 'ⁿ', '₀', '₁', '₂', '₃', '₄', '₅', '₆', '₇', '₈', '₉', '₊', '₋', '₌', '₍', '₎', 'ₐ', 'ₑ', 'ₒ', 'ₓ', 'ₔ', 'ₕ', 'ₖ', 'ₗ', 'ₘ', 'ₙ', 'ₚ', 'ₛ', 'ₜ', '₠', '₡', '₢', '₣', '₤', '₥', '₦', '₧', '₨', '₩', '₪', '₫', '€', '₭', '₮', '₯', '₰', '₱', '₲', '₳', '₴', '₵', '₶', '₷', '₸', '₹', '₺', '₻', '₼', '₽', '₾', '₿', '⃒', '⃓', '⃔', '⃕', '⃖', '⃗', '⃘', '⃙', '⃚', '⃛', '⃜', '⃝', '⃞', '⃟', '⃠', '⃡', '⃢', '⃣', 'ℹ', '℀', '℁', 'ℂ', '℃', '℄', '℅', '℆', 'ℇ', '℈', '℉', 'ℊ', 'ℋ', 'ℌ', 'ℍ', 'ℎ', 'ℏ', 'ℐ', 'ℑ', 'ℒ', 'ℓ', '℔', 'ℕ', '№', '℗', '℘', 'ℙ', 'ℚ', 'ℛ', 'ℜ', 'ℝ', '℞', '℟', '℠', '℡', '™', '℣', 'ℤ', '℥', 'Ω', '℧', 'ℨ', '℩', 'K', 'Å', 'ℬ', 'ℭ', '℮', 'ℯ', 'ℰ', 'ℱ', 'Ⅎ', 'ℳ', 'ℴ', 'ℵ', 'ℶ', 'ℷ', 'ℸ', 'ℹ', '℺', '℻', 'ℼ', 'ℽ', 'ℾ', 'ℿ', '⅀', '⅁', '⅂', '⅃', '⅄', 'ⅅ', 'ⅆ', 'ⅇ', 'ⅈ', 'ⅉ', '⅊', '⅋', '⅌', '⅍', 'ⅎ', '⅏', '⅐', '⅑', '⅒', '⅓', '⅔', '⅕', '⅖', '⅗', '⅘', '⅙', '⅚', '⅛', '⅜', '⅝', '⅞', '⅟', 'Ⅰ', 'Ⅱ', 'Ⅲ', 'Ⅳ', 'Ⅴ', 'Ⅵ', 'Ⅶ', 'Ⅷ', 'Ⅸ', 'Ⅹ', 'Ⅺ', 'Ⅻ', 'Ⅼ', 'Ⅽ', 'Ⅾ', 'Ⅿ', 'ⅰ', 'ⅱ', 'ⅲ', 'ⅳ', 'ⅴ', 'ⅵ', 'ⅶ', 'ⅷ', 'ⅸ', 'ⅹ', 'ⅺ', 'ⅻ', 'ⅼ', 'ⅽ', 'ⅾ', 'ⅿ', 'ↀ', 'ↁ', 'ↂ', 'Ↄ', 'ↄ', '←', '↑', '→', '↓', '↔', '↕', '↖', '↗', '↘', '↙', '↚', '↛', '↜', '↝', '↞', '↟', '↠', '↡', '↢', '↣', '↤', '↥', '↦', '↧', '↨', '↩', '↪', '↫', '↬', '↭', '↮', '↯', '↰', '↱', '↲', '↳', '↴', '↵', '↶', '↷', '↸', '↹', '↺', '↻', '↼', '↽', '↾', '↿', '⇀', '⇁', '⇂', '⇃', '⇄', '⇅', '⇆', '⇇', '⇈', '⇉', '⇊', '⇋', '⇌', '⇍', '⇎', '⇏', '⇐', '⇑', '⇒', '⇓', '⇔', '⇕', '⇖', '⇗', '⇘', '⇙', '⇚', '⇛', '⇜', '⇝', '⇞', '⇟', '⇠', '⇡', '⇢', '⇣', '⇤', '⇥', '⇦', '⇧', '⇨', '⇩', '⇪', '⇫', '⇬', '⇭', '⇮', '⇯', '⇰', '⇱', '⇲', '⇳', '∀', '∁', '∂', '∃', '∄', '∅', '∆', '∇', '∈', '∉', '∊', '∋', '∌', '∍', '∎', '∏', '∐', '∑', '−', '∓', '∔', '∕', '∖', '∗', '∘', '∙', '√', '∛', '∜', '∝', '∞', '∟', '∠', '∡', '∢', '∣', '∤', '∥', '∦', '∧', '∨', '∩', '∪', '∫', '∬', '∭', '∮', '∯', '∰', '∱', '∲', '∳', '∴', '∵', '∶', '∷', '∸', '∹', '∺', '∻', '∼', '∽', '∾', '∿', '≀', '≁', '≂', '≃', '≄', '≅', '≆', '≇', '≈', '≉', '≊', '≋', '≌', '≍', '≎', '≏', '≐', '≑', '≒', '≓', '≔', '≕', '≖', '≗', '≘', '≙', '≚', '≛', '≜', '≝', '≞', '≟', '≠', '≡', '≢', '≣', '≤', '≥', '≦', '≧', '≨', '≩', '≪', '≫', '≬', '≭', '≮', '≯', '≰', '≱', '≲', '≳', '≴', '≵', '≶', '≷', '≸', '≹', '≺', '≻', '≼', '≽', '≾', '≿', '⊀', '⊁', '⊂', '⊃', '⊄', '⊅', '⊆', '⊇', '⊈', '⊉', '⊊', '⊋', '⊌', '⊍', '⊎', '⊏', '⊐', '⊑', '⊒', '⊓', '⊔', '⊕', '⊖', '⊗', '⊘', '⊙', '⊚', '⊛', '⊜', '⊝', '⊞', '⊟', '⊠', '⊡', '⊢', '⊣', '⊤', '⊥', '⊦', '⊧', '⊨', '⊩', '⊪', '⊫', '⊬', '⊭', '⊮', '⊯', '⊰', '⊱', '⊲', '⊳', '⊴', '⊵', '⊶', '⊷', '⊸', '⊹', '⊺', '⊻', '⊼', '⊽', '⊾', '⊿', '⋀', '⋁', '⋂', '⋃', '⋄', '⋅', '⋆', '⋇', '⋈', '⋉', '⋊', '⋋', '⋌', '⋍', '⋎', '⋏', '⋐', '⋑', '⋒', '⋓', '⋔', '⋕', '⋖', '⋗', '⋘', '⋙', '⋚', '⋛', '⋜', '⋝', '⋞', '⋟', '⋠', '⋡', '⋢', '⋣', '⋤', '⋥', '⋦', '⋧', '⋨', '⋩', '⋪', '⋫', '⋬', '⋭', '⋮', '⋯', '⋰', '⋱', '⋲', '⋳', '⋴', '⋵', '⋶', '⋷', '⋸', '⋹', '⋺', '⋻', '⋼', '⋽', '⋾', '⋿', '⌀', '⌁', '⌂', '⌃', '⌄', '⌅', '⌆', '⌇', '⌈', '⌉', '⌊', '⌋', '⌌', '⌍', '⌎', '⌏', '⌐', '⌑', '⌒', '⌓', '⌔', '⌕', '⌖', '⌗', '⌘', '⌙', '⌚', '⌛', '⌜', '⌝', '⌞', '⌟', '⌠', '⌡', '⌢', '⌣', '⌤', '⌥', '⌦', '⌧', '⌨', '〈', '〉', '⌫', '⌬', '⌭', '⌮', '⌯', '⌰', '⌱', '⌲', '⌳', '⌴', '⌵', '⌶', '⌷', '⌸', '⌹', '⌺', '⌻', '⌼', '⌽', '⌾', '⌿', '⍀', '⍁', '⍂', '⍃', '⍄', '⍅', '⍆', '⍇', '⍈', '⍉', '⍊', '⍋', '⍌', '⍍', '⍎', '⍏', '⍐', '⍑', '⍒', '⍓', '⍔', '⍕', '⍖', '⍗', '⍘', '⍙', '⍚', '⍛', '⍜', '⍝', '⍞', '⍟', '⍠', '⍡', '⍢', '⍣', '⍤', '⍥', '⍦', '⍧', '⍨', '⍩', '⍪', '⍫', '⍬', '⍭', '⍮', '⍯', '⍰', '⍱', '⍲', '⍳', '⍴', '⍵', '⍶', '⍷', '⍸', '⍹', '⍺', '⍻', '⍼', '⍽', '⍾', '⍿', '⎀', '⎁', '⎂', '⎃', '⎄', '⎅', '⎆', '⎇', '⎈', '⎉', '⎊', '⎋', '⎌', '⎍', '⎎', '⎏', '⎐', '⎑', '⎒', '⎓', '⎔', '⎕', '⎖', '⎗', '⎘', '⎙', '⎚', '⎛', '⎜', '⎝', '⎞', '⎟', '⎠', '⎡', '⎢', '⎣', '⎤', '⎥', '⎦', '⎧', '⎨', '⎩', '⎪', '⎫', '⎬', '⎭', '⎮', '⎯', '⎰', '⎱', '⎲', '⎳', '⎴', '⎵', '⎶', '⎷', '⎸', '⎹', '⏎', '⏏', '⏐', '⏑', '⏒', '⏓', '⏔', '⏕', '⏖', '⏗', '⏘', '⏙', '⏚', '⏛', '⏜', '⏝', '⏞', '⏟', '⏠', '⏡', '⏢', '⏣', '⏤', '⏥', '⏦', '⏧', '⏨', '⏩', '⏪', '⏫', '⏬', '⏭', '⏮', '⏯', '⏰', '⏱', '⏲', '⏳', '⏴', '⏵', '⏶', '⏷', '⏸', '⏹', '⏺', '⏻', '⏼', '⏽', '♾', '␀', '␁', '␂', '␃', '␄', '␅', '␆', '␇', '␈', '␉', '␊', '␋', '␌', '␍', '␎', '␏', '␐', '␑', '␒', '␓', '␔', '␕', '␖', '␗', '␘', '␙', '␚', '␛', '␜', '␝', '␞', '␟', '␠', '␡', '␣', '␢',];
        let ipa_like_strings = vec!["eɪ", "aɪ", "ɔɪ", "aʊ", "oʊ", "ɪə", "eə", "ʊə", "aɪə", "aʊə", "ɔɪə", "ɜː", "ɪr", "ɛr", "ɑr", "ɔr", "ʊr", "ʌr", "ər", "ɑ̃", "ɛ̃", "ɔ̃", "œ̃", "dʒ", "tʃ", "θ", "ð", "ʃ", "ʒ", "ŋ", "ɹ", "ɚ", "ɝ", "ɫ", "ᵻ", "ᵿ", "ᵊ", "ᶿ", "ⁿ", "ᵐ", "ᵑ", "ᶣ", "ᶞ", "ᶢ", "ᵏ", "ᶲ", "ˢ", "ᶻ", "ᶾ", "ᶽ", "ᶜ", "ᶨ", "ᵝ", "ᵞ", "ᶡ", "ᶢ", "ᶣ", "ᶅ", "ᶆ", "ᶇ", "ᶈ", "ᶉ", "ᶊ", "ᶋ", "ᶌ", "ᶍ", "ᶎ", "ḁ", "ḃ", "ḅ", "ḇ", "ḉ", "ḋ", "ḍ", "ḏ", "ḑ", "ḓ", "ḕ", "ḗ", "ḙ", "ḛ", "ḝ", "ḟ", "ḡ", "ḣ", "ḥ", "ḧ", "ḩ", "ḫ", "ḭ", "ḯ", "ḱ", "ḳ", "ḵ", "ḷ", "ḹ", "ḻ", "ḽ", "ḿ", "ṁ", "ṃ", "ṅ", "ṇ", "ṉ", "ṋ", "ṍ", "ṏ", "ṑ", "ṓ", "ṕ", "ṗ", "ṙ", "ṛ", "ṝ", "ṟ", "ṡ", "ṣ", "ṥ", "ṧ", "ṩ", "ṫ", "ṭ", "ṯ", "ṱ", "ṳ", "ṵ", "ṷ", "ṹ", "ṻ", "ṽ", "ṿ", "ẁ", "ẃ", "ẅ", "ẇ", "ẉ", "ẋ", "ẍ", "ẏ", "ẑ", "ẓ", "ẕ", "ẛ", "ạ", "ả", "ấ", "ầ", "ẩ", "ẫ", "ậ", "ắ", "ằ", "ẳ", "ẵ", "ặ", "ẹ", "ẻ", "ẽ", "ế", "ề", "ể", "ễ", "ệ", "ỉ", "ị", "ọ", "ỏ", "ố", "ồ", "ổ", "ỗ", "ộ", "ớ", "ờ", "ở", "ỡ", "ợ", "ụ", "ủ", "ứ", "ừ", "ử", "ữ", "ự", "ỳ", "ỵ", "ỷ", "ỹ", "ἀ", "ἁ", "ἂ", "ἃ", "ἄ", "ἅ", "ἆ", "ἇ", "Ἀ", "Ἁ", "Ἂ", "Ἃ", "Ἄ", "Ἅ", "Ἆ", "Ἇ", "ἐ", "ἑ", "ἒ", "ἓ", "ἔ", "ἕ", "Ἐ", "Ἑ", "Ἒ", "Ἓ", "Ἔ", "Ἕ", "ἠ", "ἡ", "ἢ", "ἣ", "ἤ", "ἥ", "ἦ", "ἧ", "Ἠ", "Ἡ", "Ἢ", "Ἣ", "Ἤ", "Ἥ", "Ἦ", "Ἧ", "ἰ", "ἱ", "ἲ", "ἳ", "ἴ", "ἵ", "ἶ", "ἷ", "Ἰ", "Ἱ", "Ἲ", "Ἳ", "Ἴ", "Ἵ", "Ἶ", "Ἷ", "ὀ", "ὁ", "ὂ", "ὃ", "ὄ", "ὅ", "Ὀ", "Ὁ", "Ὂ", "Ὃ", "Ὄ", "Ὅ", "ὐ", "ὑ", "ὒ", "ὓ", "ὔ", "ὕ", "ὖ", "ὗ", "Ὑ", "Ὓ", "Ὕ", "Ὗ", "ὠ", "ὡ", "ὢ", "ὣ", "ὤ", "ὥ", "ὦ", "ὧ", "Ὠ", "Ὡ", "Ὢ", "Ὣ", "Ὤ", "Ὥ", "Ὦ", "Ὧ", "ὰ", "ά", "ὲ", "έ", "ὴ", "ή", "ὶ", "ί", "ὸ", "ό", "ὺ", "ύ", "ὼ", "ώ", "ᾀ", "ᾁ", "ᾂ", "ᾃ", "ᾄ", "ᾅ", "ᾆ", "ᾇ", "ᾈ", "ᾉ", "ᾊ", "ᾋ", "ᾌ", "ᾍ", "ᾎ", "ᾏ", "ᾐ", "ᾑ", "ᾒ", "ᾓ", "ᾔ", "ᾕ", "ᾖ", "ᾗ", "ᾘ", "ᾙ", "ᾚ", "ᾛ", "ᾜ", "ᾝ", "ᾞ", "ᾟ", "ᾠ", "ᾡ", "ᾢ", "ᾣ", "ᾤ", "ᾥ", "ᾦ", "ᾧ", "ᾨ", "ᾩ", "ᾪ", "ᾫ", "ᾬ", "ᾭ", "ᾮ", "ᾯ", "ᾰ", "ᾱ", "ᾲ", "ᾳ", "ᾴ", "ᾶ", "ᾷ", "Ᾰ", "Ᾱ", "Ὰ", "Ά", "ᾼ", "᾽", "ι", "᾿", "῀", "῁", "ῂ", "ῃ", "ῄ", "ῆ", "ῇ", "Ὲ", "Έ", "Ὴ", "Ή", "ῌ", "῍", "῎", "῏", "ῐ", "ῑ", "ῒ", "ΐ", "ῖ", "ῗ", "Ῐ", "Ῑ", "Ὶ", "Ί", "῝", "῞", "῟", "ῠ", "ῡ", "ῢ", "ΰ", "ῤ", "ῥ", "ῦ", "ῧ", "Ῠ", "Ῡ", "Ὺ", "Ύ", "Ῥ", "῭", "΅", "`", "ῲ", "ῳ", "ῴ", "ῶ", "ῷ", "Ὸ", "Ό", "Ὼ", "Ώ", "ῼ", "´", "῾", "n̩", "l̩", "r̩", "m̩", "ŋ̍", "k͡p", "ɡ͡b", "t͡s", "d͡z", "t͡ʃ", "d͡ʒ", "t͡ɕ", "d͡ʑ", "t͡ɬ", "k͡p", "ɡ͡b", "t͡s", "d͡z", "t͡ʃ", "d͡ʒ", "t͡ɕ", "d͡ʑ", "t͡ɬ", "i̯", "u̯", "ɪ̯", "ʊ̯", "e̯", "o̯", "ɛ̯", "ɔ̯", "æ̯", "a̯", "ɶ̯", "ɑ̯", "ɒ̯", "ʌ̯", "ə̯", "ɐ̯", "ɨ̯", "ʉ̯", "ɘ̯", "ɵ̯", "ɘ̯", "ɵ̯", "y̑", "r̥", "r̄", "l̥", "l̄", "m̥", "n̥", "ŋ̊", "ʙ̥", "ʀ̥", "ɾ̥", "ɽ̊", "ɸ", "β", "f", "v", "θ", "ð", "s", "z", "ʃ", "ʒ", "ʂ", "ʐ", "ç", "ʝ", "x", "ɣ", "χ", "ʁ", "ħ", "ʕ", "h", "ɦ", "ɧ", "t̪", "d̪", "t̺", "d̺", "t̻", "d̻", "t̼", "d̼", "t̪͡s", "d̪͡z", "t̺͡s", "d̺͡z", "t̻͡s", "d̻͡z", "t̼͡s", "d̼͡z", "ʈ", "ɖ", "ɟ", "ɢ", "ʡ", "ʔ", "ʘ", "ǀ", "ǃ", "ǂ", "ǁ", "ɓ", "ɗ", "ʄ", "ɠ", "ʛ", "ʍ", "ɥ", "ʜ", "ʢ", "ʡ", "ɕ", "ʑ", "ɧ", "ɫ", "ɬ", "ɮ", "ɯ", "ɘ", "ɚ", "ɵ", "ɶ", "ɒ", "ɨ", "ʉ", "ɘ", "ə", "ɛ", "ɜ", "ɞ", "ɐ", "ɶ", "ɑ", "ɒ", "ᵻ", "ᵿ", "ɫ", "ᵊ", "ᵸ", "ᶿ", "ᶑ", "ᵝ", "ᵞ", "ᶡ", "ᶣ", "ᶅ", "ᶆ", "ᶇ", "ᶈ", "ᶉ", "ᶊ", "ᶋ", "ᶌ", "ᶍ", "ᶎ", "ḁ", "ḃ", "ḅ", "ḇ", "ḉ", "ḋ", "ḍ", "ḏ", "ḑ", "ḓ", "ḕ", "ḗ", "ḙ", "ḛ", "ḝ", "ḟ", "ḡ", "ḣ", "ḥ", "ḧ", "ḩ", "ḫ", "ḭ", "ḯ", "ḱ", "ḳ", "ḵ", "ḷ", "ḹ", "ḻ", "ḽ", "ḿ", "ṁ", "ṃ", "ṅ", "ṇ", "ṉ", "ṋ", "ṍ", "ṏ", "ṑ", "ṓ", "ṕ", "ṗ", "ṙ", "ṛ", "ṝ", "ṟ", "ṡ", "ṣ", "ṥ", "ṧ", "ṩ", "ṫ", "ṭ", "ṯ", "ṱ", "ṳ", "ṵ", "ṷ", "ṹ", "ṻ", "ṽ", "ṿ", "ẁ", "ẃ", "ẅ", "ẇ", "ẉ", "ẋ", "ẍ", "ẏ", "ẑ", "ẓ", "ẕ", "ẛ", "ạ", "ả", "ấ", "ầ", "ẩ", "ẫ", "ậ", "ắ", "ằ", "ẳ", "ẵ", "ặ", "ẹ", "ẻ", "ẽ", "ế", "ề", "ể", "ễ", "ệ", "ỉ", "ị", "ọ", "ỏ", "ố", "ồ", "ổ", "ỗ", "ộ", "ớ", "ờ", "ở", "ỡ", "ợ", "ụ", "ủ", "ứ", "ừ", "ử", "ữ", "ự", "ỳ", "ỵ", "ỷ", "ỹ", "ἀ", "ἁ", "ἂ", "ἃ", "ἄ", "ἅ", "ἆ", "ἇ", "Ἀ", "Ἁ", "Ἂ", "Ἃ", "Ἄ", "Ἅ", "Ἆ", "Ἇ", "ἐ", "ἑ", "ἒ", "ἓ", "ἔ", "ἕ", "Ἐ", "Ἑ", "Ἒ", "Ἓ", "Ἔ", "Ἕ", "ἠ", "ἡ", "ἢ", "ἣ", "ἤ", "ἥ", "ἦ", "ἧ", "Ἠ", "Ἡ", "Ἢ", "Ἣ", "Ἤ", "Ἥ", "Ἦ", "Ἧ", "ἰ", "ἱ", "ἲ", "ἳ", "ἴ", "ἵ", "ἶ", "ἷ", "Ἰ", "Ἱ", "Ἲ", "Ἳ", "Ἴ", "Ἵ", "Ἶ", "Ἷ", "ὀ", "ὁ", "ὂ", "ὃ", "ὄ", "ὅ", "Ὀ", "Ὁ", "Ὂ", "Ὃ", "Ὄ", "Ὅ", "ὐ", "ὑ", "ὒ", "ὓ", "ὔ", "ὕ", "ὖ", "ὗ", "Ὑ", "Ὓ", "Ὕ", "Ὗ", "ὠ", "ὡ", "ὢ", "ὣ", "ὤ", "ὥ", "ὦ", "ὧ", "Ὠ", "Ὡ", "Ὢ", "Ὣ", "Ὤ", "Ὥ", "Ὦ", "Ὧ", "ὰ", "ά", "ὲ", "έ", "ὴ", "ή", "ὶ", "ί", "ὸ", "ό", "ὺ", "ύ", "ὼ", "ώ", "ᾀ", "ᾁ", "ᾂ", "ᾃ", "ᾄ", "ᾅ", "ᾆ", "ᾇ", "ᾈ", "ᾉ", "ᾊ", "ᾋ", "ᾌ", "ᾍ", "ᾎ", "ᾏ", "ᾐ", "ᾑ", "ᾒ", "ᾓ", "ᾔ", "ᾕ", "ᾖ", "ᾗ", "ᾘ", "ᾙ", "ᾚ", "ᾛ", "ᾜ", "ᾝ", "ᾞ", "ᾟ", "ᾠ", "ᾡ", "ᾢ", "ᾣ", "ᾤ", "ᾥ", "ᾦ", "ᾧ", "ᾨ", "ᾩ", "ᾪ", "ᾫ", "ᾬ", "ᾭ", "ᾮ", "ᾯ", "ᾰ", "ᾱ", "ᾲ", "ᾳ", "ᾴ", "ᾶ", "ᾷ", "Ᾰ", "Ᾱ", "Ὰ", "Ά", "ᾼ", "᾽", "ι", "᾿", "῀", "῁", "ῂ", "ῃ", "ῄ", "ῆ", "ῇ", "Ὲ", "Έ", "Ὴ", "Ή", "ῌ", "῍", "῎", "῏", "ῐ", "ῑ", "ῒ", "ΐ", "ῖ", "ῗ", "Ῐ", "Ῑ", "Ὶ", "Ί", "῝", "῞", "῟", "ῠ", "ῡ", "ῢ", "ΰ", "ῤ", "ῥ", "ῦ", "ῧ", "Ῠ", "Ῡ", "Ὺ", "Ύ", "Ῥ", "῭", "΅", "`", "ῲ", "ῳ", "ῴ", "ῶ", "ῷ", "Ὸ", "Ό", "Ὼ", "Ώ", "ῼ", "´", "῾", "n̩", "l̩", "r̩", "m̩", "ŋ̍", "k͡p", "ɡ͡b", "t͡s", "d͡z", "t͡ʃ", "d͡ʒ", "t͡ɕ", "d͡ʑ", "t͡ɬ", "k͡p", "ɡ͡b", "t͡s", "d͡z", "t͡ʃ", "d͡ʒ", "t͡ɕ", "d͡ʑ", "t͡ɬ", "i̯", "u̯", "ɪ̯", "ʊ̯", "e̯", "o̯", "ɛ̯", "ɔ̯", "æ̯", "a̯", "ɶ̯", "ɑ̯", "ɒ̯", "ʌ̯", "ə̯", "ɐ̯", "ɨ̯", "ʉ̯", "ɘ̯", "ɵ̯", "ɘ̯", "ɵ̯", "y̑", "r̥", "r̄", "l̥", "l̄", "m̥", "n̥", "ŋ̊", "ʙ̥", "ʀ̥", "ɾ̥", "ɽ̊", "ɸ", "β", "f", "v", "θ", "ð", "s", "z", "ʃ", "ʒ", "ʂ", "ʐ", "ç", "ʝ", "x", "ɣ", "χ", "ʁ", "ħ", "ʕ", "h", "ɦ", "ɧ", "t̪", "d̪", "t̺", "d̺", "t̻", "d̻", "t̼", "d̼", "t̪͡s", "d̪͡z", "t̺͡s", "d̺͡z", "t̻͡s", "d̻͡z", "t̼͡s", "d̼͡z", "ʈ", "ɖ", "ɟ", "ɢ", "ʡ", "ʔ", "ʘ", "ǀ", "ǃ", "ǂ", "ǁ", "ɓ", "ɗ", "ʄ", "ɠ", "ʛ", "ʍ", "ɥ", "ʜ", "ʢ", "ʡ", "ɕ", "ʑ", "ɧ", "ɫ", "ɬ", "ɮ", "ɯ", "ɘ", "ɚ", "ɵ", "ɶ", "ɒ", "ɨ", "ʉ", "ɘ", "ə", "ɛ", "ɜ", "ɞ", "ɐ", "ɶ", "ɑ", "ɒ", "ᵻ", "ᵿ", "ɫ", "ᵊ", "ᵸ", "ᶿ", "ᶑ", "ᵝ", "ᵞ", "ᶡ", "ᶣ", "ᶅ", "ᶆ", "ᶇ", "ᶈ", "ᶉ", "ᶊ", "ᶋ", "ᶌ", "ᶍ", "ᶎ", "ḁ", "ḃ", "ḅ", "ḇ", "ḉ", "ḋ", "ḍ", "ḏ", "ḑ", "ḓ", "ḕ", "ḗ", "ḙ", "ḛ", "ḝ", "ḟ", "ḡ", "ḣ", "ḥ", "ḧ", "ḩ", "ḫ", "ḭ", "ḯ", "ḱ", "ḳ", "ḵ", "ḷ", "ḹ", "ḻ", "ḽ", "ḿ", "ṁ", "ṃ", "ṅ", "ṇ", "ṉ", "ṋ", "ṍ", "ṏ", "ṑ", "ṓ", "ṕ", "ṗ", "ṙ", "ṛ", "ṝ", "ṟ", "ṡ", "ṣ", "ṥ", "ṧ", "ṩ", "ṫ", "ṭ", "ṯ", "ṱ", "ṳ", "ṵ", "ṷ", "ṹ", "ṻ", "ṽ", "ṿ", "ẁ", "ẃ", "ẅ", "ẇ", "ẉ", "ẋ", "ẍ", "ẏ", "ẑ", "ẓ", "ẕ", "ẛ", "ạ", "ả", "ấ", "ầ", "ẩ", "ẫ", "ậ", "ắ", "ằ", "ẳ", "ẵ", "ặ", "ẹ", "ẻ", "ẽ", "ế", "ề", "ể", "ễ", "ệ", "ỉ", "ị", "ọ", "ỏ", "ố", "ồ", "ổ", "ỗ", "ộ", "ớ", "ờ", "ở", "ỡ", "ợ", "ụ", "ủ", "ứ", "ừ", "ử", "ữ", "ự", "ỳ", "ỵ", "ỷ", "ỹ", "ἀ", "ἁ", "ἂ", "ἃ", "ἄ", "ἅ", "ἆ", "ἇ", "Ἀ", "Ἁ", "Ἂ", "Ἃ", "Ἄ", "Ἅ", "Ἆ", "Ἇ", "ἐ", "ἑ", "ἒ", "ἓ", "ἔ", "ἕ", "Ἐ", "Ἑ", "Ἒ", "Ἓ", "Ἔ", "Ἕ", "ἠ", "ἡ", "ἢ", "ἣ", "ἤ", "ἥ", "ἦ", "ἧ", "Ἠ", "Ἡ", "Ἢ", "Ἣ", "Ἤ", "Ἥ", "Ἦ", "Ἧ", "ἰ", "ἱ", "ἲ", "ἳ", "ἴ", "ἵ", "ἶ", "ἷ", "Ἰ", "Ἱ", "Ἲ", "Ἳ", "Ἴ", "Ἵ", "Ἶ", "Ἷ", "ὀ", "ὁ", "ὂ", "ὃ", "ὄ", "ὅ", "Ὀ", "Ὁ", "Ὂ", "Ὃ", "Ὄ", "Ὅ", "ὐ", "ὑ", "ὒ", "ὓ", "ὔ", "ὕ", "ὖ", "ὗ", "Ὑ", "Ὓ", "Ὕ", "Ὗ", "ὠ", "ὡ", "ὢ", "ὣ", "ὤ", "ὥ", "ὦ", "ὧ", "Ὠ", "Ὡ", "Ὢ", "Ὣ", "Ὤ", "Ὥ", "Ὦ", "Ὧ", "ὰ", "ά", "ὲ", "έ", "ὴ", "ή", "ὶ", "ί", "ὸ", "ό", "ὺ", "ύ", "ὼ", "ώ", "ᾀ", "ᾁ", "ᾂ", "ᾃ", "ᾄ", "ᾅ", "ᾆ", "ᾇ", "ᾈ", "ᾉ", "ᾊ", "ᾋ", "ᾌ", "ᾍ", "ᾎ", "ᾏ", "ᾐ", "ᾑ", "ᾒ", "ᾓ", "ᾔ", "ᾕ", "ᾖ", "ᾗ", "ᾘ", "ᾙ", "ᾚ", "ᾛ", "ᾜ", "ᾝ", "ᾞ", "ᾟ", "ᾠ", "ᾡ", "ᾢ", "ᾣ", "ᾤ", "ᾥ", "ᾦ", "ᾧ", "ᾨ", "ᾩ", "ᾪ", "ᾫ", "ᾬ", "ᾭ", "ᾮ", "ᾯ", "ᾰ", "ᾱ", "ᾲ", "ᾳ", "ᾴ", "ᾶ", "ᾷ", "Ᾰ", "Ᾱ", "Ὰ", "Ά", "ᾼ", "᾽", "ι", "᾿", "῀", "῁", "ῂ", "ῃ", "ῄ", "ῆ", "ῇ", "Ὲ", "Έ", "Ὴ", "Ή", "ῌ", "῍", "῎", "῏", "ῐ", "ῑ", "ῒ", "ΐ", "ῖ", "ῗ", "Ῐ", "Ῑ", "Ὶ", "Ί", "῝", "῞", "῟", "ῠ", "ῡ", "ῢ", "ΰ", "ῤ", "ῥ", "ῦ", "ῧ", "Ῠ", "Ῡ", "Ὺ", "Ύ", "Ῥ", "῭", "΅", "`", "ῲ", "ῳ", "ῴ", "ῶ", "ῷ", "Ὸ", "Ό", "Ὼ", "Ώ", "ῼ", "´", "῾"];
        let is_phoneme_string = expanded_phrase.chars().all(|c| {
            c.is_ascii_lowercase() ||
            ipa_like_chars.contains(&c) ||
            ipa_like_strings.iter().any(|&s| expanded_phrase.contains(s))
        });
        if is_phoneme_string {
            return expanded_phrase.to_string().replace("/", "").replace(".", "");
        } else {
            return g2p(expanded_phrase);
        }
    }
    word2ipa_with_context(word, "", "")
}